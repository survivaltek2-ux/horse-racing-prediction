{
  "summary": {
    "overall_status": "FAIL",
    "total_tests": 6,
    "passed_tests": 0,
    "failed_tests": 6,
    "warning_tests": 0,
    "data_integrity_score": 0,
    "performance_improvement": 0,
    "migration_timestamp": "2025-09-18 09:19:58.352873",
    "verification_timestamp": "2025-09-18 10:19:58.352879"
  },
  "detailed_results": [
    {
      "test_name": "Data Completeness",
      "status": "FAIL",
      "message": "Data completeness verification failed: (sqlite3.OperationalError) no such table: horses\n[SQL: SELECT COUNT(*) FROM horses]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)",
      "details": {
        "error": "(sqlite3.OperationalError) no such table: horses\n[SQL: SELECT COUNT(*) FROM horses]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"
      },
      "timestamp": "2025-09-18 10:19:58.317389",
      "duration_ms": 18.26190948486328,
      "expected": null,
      "actual": null
    },
    {
      "test_name": "Schema Structure",
      "status": "FAIL",
      "message": "Schema structure issues: Missing tables: api_credentials, predictions, users, horses; Tables without primary keys: horses, api_credentials, predictions, users",
      "details": {
        "tables": [
          {
            "name": "races",
            "type": "BASE TABLE"
          }
        ],
        "columns": {
          "races": [
            {
              "name": "id",
              "type": "integer",
              "nullable": false,
              "default": "nextval('races_id_seq'::regclass)"
            },
            {
              "name": "name",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "date",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "time",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "track",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "distance",
              "type": "numeric",
              "nullable": true,
              "default": null
            },
            {
              "name": "surface",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "race_class",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "prize_money",
              "type": "numeric",
              "nullable": true,
              "default": null
            },
            {
              "name": "weather",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "track_condition",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "status",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "results",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "created_at",
              "type": "text",
              "nullable": true,
              "default": null
            },
            {
              "name": "updated_at",
              "type": "text",
              "nullable": true,
              "default": null
            }
          ]
        },
        "constraints": {
          "races": [
            {
              "name": "18063_20904_1_not_null",
              "type": "CHECK"
            },
            {
              "name": "chk_distance",
              "type": "CHECK"
            },
            {
              "name": "chk_prize_money",
              "type": "CHECK"
            },
            {
              "name": "races_pkey",
              "type": "PRIMARY KEY"
            }
          ]
        },
        "indexes": {
          "races": [
            {
              "name": "idx_races_date",
              "definition": "CREATE INDEX idx_races_date ON public.races USING btree (date)"
            },
            {
              "name": "idx_races_date_status",
              "definition": "CREATE INDEX idx_races_date_status ON public.races USING btree (date, status)"
            },
            {
              "name": "idx_races_status",
              "definition": "CREATE INDEX idx_races_status ON public.races USING btree (status)"
            },
            {
              "name": "idx_races_track",
              "definition": "CREATE INDEX idx_races_track ON public.races USING btree (track)"
            },
            {
              "name": "races_pkey",
              "definition": "CREATE UNIQUE INDEX races_pkey ON public.races USING btree (id)"
            }
          ]
        }
      },
      "timestamp": "2025-09-18 10:19:58.342150",
      "duration_ms": 24.147748947143555,
      "expected": null,
      "actual": null
    },
    {
      "test_name": "Data Integrity",
      "status": "FAIL",
      "message": "Data integrity verification failed: (psycopg2.errors.UndefinedTable) relation \"predictions\" does not exist\nLINE 2:                     SELECT COUNT(*) FROM predictions p\n                                                 ^\n\n[SQL: \n                    SELECT COUNT(*) FROM predictions p\n                    LEFT JOIN races r ON p.race_id = r.id\n                    WHERE r.id IS NULL\n                ]\n(Background on this error at: https://sqlalche.me/e/20/f405)",
      "details": {
        "error": "(psycopg2.errors.UndefinedTable) relation \"predictions\" does not exist\nLINE 2:                     SELECT COUNT(*) FROM predictions p\n                                                 ^\n\n[SQL: \n                    SELECT COUNT(*) FROM predictions p\n                    LEFT JOIN races r ON p.race_id = r.id\n                    WHERE r.id IS NULL\n                ]\n(Background on this error at: https://sqlalche.me/e/20/f405)"
      },
      "timestamp": "2025-09-18 10:19:58.343899",
      "duration_ms": 1.2509822845458984,
      "expected": null,
      "actual": null
    },
    {
      "test_name": "Performance Comparison",
      "status": "FAIL",
      "message": "Performance comparison failed: (sqlite3.OperationalError) no such table: horses\n[SQL: SELECT COUNT(*) FROM horses]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)",
      "details": {
        "error": "(sqlite3.OperationalError) no such table: horses\n[SQL: SELECT COUNT(*) FROM horses]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"
      },
      "timestamp": "2025-09-18 10:19:58.348682",
      "duration_ms": 4.236936569213867,
      "expected": null,
      "actual": null
    },
    {
      "test_name": "Functional Testing",
      "status": "FAIL",
      "message": "Functional operations failed: insert, join, aggregate",
      "details": {
        "insert": {
          "status": "failed",
          "error": "(psycopg2.errors.UndefinedColumn) column \"race_name\" of relation \"races\" does not exist\nLINE 2:                         INSERT INTO races (race_name, race_d...\n                                                   ^\n\n[SQL: \n                        INSERT INTO races (race_name, race_date, track_name, race_type, distance, surface)\n                        VALUES ('Test Race Verification', CURRENT_DATE, 'Test Track', 'flat', 1200.0, 'dirt')\n                        RETURNING id\n                    ]\n(Background on this error at: https://sqlalche.me/e/20/f405)"
        },
        "join": {
          "status": "failed",
          "error": "(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block\n\n[SQL: \n                        SELECT COUNT(*)\n                        FROM races r\n                        LEFT JOIN predictions p ON r.id = p.race_id\n                        LEFT JOIN horses h ON p.horse_id = h.id\n                    ]\n(Background on this error at: https://sqlalche.me/e/20/2j85)"
        },
        "aggregate": {
          "status": "failed",
          "error": "(psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block\n\n[SQL: \n                        SELECT \n                            COUNT(*) as total_races,\n                            AVG(distance) as avg_distance,\n                            MIN(race_date) as earliest_race,\n                            MAX(race_date) as latest_race\n                        FROM races\n                        WHERE distance IS NOT NULL\n                    ]\n(Background on this error at: https://sqlalche.me/e/20/2j85)"
        }
      },
      "timestamp": "2025-09-18 10:19:58.351393",
      "duration_ms": 2.198934555053711,
      "expected": null,
      "actual": null
    },
    {
      "test_name": "Data Consistency",
      "status": "FAIL",
      "message": "Data consistency verification failed: __init__() got multiple values for argument 'schema'",
      "details": {
        "error": "__init__() got multiple values for argument 'schema'"
      },
      "timestamp": "2025-09-18 10:19:58.352078",
      "duration_ms": 0.186920166015625,
      "expected": null,
      "actual": null
    }
  ],
  "configuration": {
    "databases": {
      "sqlite": {
        "path": "database.db"
      },
      "postgresql": {
        "host": "localhost",
        "port": 5432,
        "database": "hrp_database",
        "username": "hrp_app",
        "password": "password"
      }
    },
    "verification": {
      "data_completeness": true,
      "schema_structure": true,
      "data_integrity": true,
      "performance_comparison": true,
      "functional_testing": true,
      "application_compatibility": true
    },
    "thresholds": {
      "data_completeness_percent": 99.9,
      "performance_improvement_percent": 20,
      "max_acceptable_variance_percent": 0.1
    },
    "tables": [
      "races",
      "horses",
      "predictions",
      "users",
      "api_credentials"
    ],
    "sample_size": 1000,
    "performance_queries": [
      "SELECT COUNT(*) FROM races",
      "SELECT COUNT(*) FROM horses",
      "SELECT COUNT(*) FROM predictions",
      "SELECT r.race_name, h.horse_name, p.confidence \n                   FROM races r \n                   JOIN predictions p ON r.id = p.race_id \n                   JOIN horses h ON p.horse_id = h.id \n                   LIMIT 100"
    ]
  },
  "verification_metadata": {
    "verifier_version": "1.0",
    "python_version": "3.9.6 (default, Aug  8 2025, 19:06:38) \n[Clang 17.0.0 (clang-1700.3.19.1)]",
    "verification_duration_seconds": 0.513077
  }
}